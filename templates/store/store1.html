{% extends '../main.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href=" {% static 'assets/css/store/store.css' %}" />

<!--- Start Collection slogan -->

<section class="collectionclass">
  {% if 'search' in request.path %}
  <p>Search result ...</p>
  {% else %}
  <p>Collection 2023 - 2024</p>
  {% endif %}
</section>
<!--- End Collection slogan -->
<section class="list-cat-filter-sortby-section">
  <ul class="list-cat-filter-sortby">
    <li class="category-part">
      {% if category %}
      <ul>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li>|</li>
        <li><a href="{% url 'store' %}">All</a></li>
        <li>|</li>
        <li>{{category.name}}</li>
      </ul>
      {% else %}
      <ul>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li>|</li>
        <li>All</li>

        <!-- Start Print only the parents-->
        {% for cat in parents %}
        <li>|</li>
        <li>
          <a href="{% url 'products_by_category' cat.slug %}">{{cat.name}}</a>
        </li>
        {% endfor %}
        <!-- End Print only the parents-->
      </ul>
      {% endif %}
    </li>
    <li class="filter-sortby-part">
      <div class="filter-sortby-container">
        

        <div class="dropdown">
          <a class="dropbtn">Filters</a>
          <div class="">
            {% for var in variations %}
            <label class="rad-label">
              <input type="radio" class="rad-input" name="rad" />
              <div class="rad-design"></div>
              <a href = "?varID={{var.varID}}" class="rad-text">{{var.variation_value}}</a>
            </label>
            {% endfor %}
          </div>
        </div>
     
          
       

        <!-- Start Sort by-->
        <div class="dropdown">
          <a class="dropbtn">Sort by</a>

          <div class="filters">
            <a class="filter_by" href="?sort=l2h">Prix croissant</a>
          </div>
          <div class="filters">
            <a class="filter_by" href="?sort=h2l">Prix decroissant</a>
          </div>
<!--     
          <div class="dropdown-content sortby">
            <label class="rad-label">
              <input type="radio" class="rad-input" name="rad" />
              <div class="rad-design"></div>
              <div class="rad-text">Ascending price</div>
            </label>
            <label class="rad-label">
              <input type="radio" class="rad-input" name="rad" />
              <div class="rad-design"></div>
              <div class="rad-text">Descending price</div>
            </label>
          </div> -->
       
        </div>
        <!-- End Sort by-->
      </div>
    </li>
  </ul>
</section>

<!--- start store contents -->
<section class="store-middle-contents">
  <div class="item-number">
    {% if not product_count %}
    <span> 0 item found</span>
    {% elif product_count == 1 %}
    <span>1 item found</span>
    {% else %}
    <span>{{product_count}} items found</span>
    {% endif %}
  </div>
  <div class="gallery">
    <!--- Start of One Item container -->

    {% if products %} {% for product in products %}

    <div class="item">
      <!--- All image for each product -->

      <!---{% for image in product.photos.all %}
<img class="product-img" src="{{ image.photo_name.url }}" alt="{{ product.product_name }}" />
{% endfor %} -->
      <img
        class="product-img"
        src="{{ product.product_cover_image.url }}"
        alt="{{ product.product_name }}"
      />

      <!--- End All image for each product -->
      <div class="product-name-price-heartimage">
        <ul>
          <li><a href="{{ product.get_url}}">{{product.product_name}}</a></li>
          <li>{{product.product_price}}</li>
        </ul>
        <img src="{% static 'assets/imgs/favoritedislike.png' %}" alt="" />
      </div>
    </div>

    {% endfor %} {% else %}
    <p>No product found, try again..</p>
    {% endif %}

    <!--- End of One Item container -->
  </div>
</section>

<!-- Start pagination -->

<section class="pagination-section">
  {% if products.has_other_pages %}
  <div class="pagination">
    <span class="step-links">
      {% if products.has_previous %}
      <a href="?page=1">&laquo; first</a>
      <a href="?page={{ products.previous_page_number }}">previous</a>
      {% endif %}

      <span class="current">
        Page {{ products.number }} of {{ products.paginator.num_pages }}.
      </span>

      {% if products.has_next %}
      <a href="?page={{ products.next_page_number }}">next</a>
      <a href="?page={{ products.paginator.num_pages }}">last &raquo;</a>
      {% endif %}
    </span>
  </div>
  {% endif %}
</section>
<!--- end store contents -->
{% comment %}
<script>
  const customSelect = document.querySelector(".custom-select");
  const selectBtn = document.querySelector(".select-button");

  const selectedValue = document.querySelector(".selected-value");
  const optionsList = document.querySelectorAll(".select-dropdown li");

  // add click event to select button
  selectBtn.addEventListener("click", () => {
    // add/remove active class on the container element
    customSelect.classList.toggle("active");
    // update the aria-expanded attribute based on the current state
    selectBtn.setAttribute(
      "aria-expanded",
      selectBtn.getAttribute("aria-expanded") === "true" ? "false" : "true"
    );
  });

  optionsList.forEach((option) => {
    function handler(e) {
      // Click Events
      if (e.type === "click" && e.clientX !== 0 && e.clientY !== 0) {
        selectedValue.textContent = this.children[1].textContent;
        customSelect.classList.remove("active");
      }
      // Key Events
      if (e.key === "Enter") {
        selectedValue.textContent = this.textContent;
        customSelect.classList.remove("active");
      }
    }

    option.addEventListener("keyup", handler);
    option.addEventListener("click", handler);
  });
</script>
{% endcomment %} {% endblock %}
