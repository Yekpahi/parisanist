{% extends '../main.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href=" {% static 'assets/css/cart/cart.css' %}" />

<div class="cart-main">
  <section class="cart-header">
    <ul>
      <li class="logo-text"><h1>parisianist</h1></li>
      <li class="cart-step">
        <ul>
          <li>
            <div class="circle circleCart"><span>1</span></div>
            <span>CART</span>
          </li>
        </ul>
        <ul>
          <li>
            <div class="circle circleDelivery"><span>2</span></div>
            <span>DELIVERY</span>
          </li>
        </ul>
        <ul>
          <li>
            <div class="circle circlePayment"><span>3</span></div>
            <span>BILLING AND PAYMENT</span>
          </li>
        </ul>
      </li>
    </ul>
  </section>
  <div class="shopping-cart">
    <h1>SHOPPING CART</h1>
  </div>

  {% if not cart_items %}
  <!--- Start Empty cart-->
  <h1>Your shopping cart is empty</h1>
  <button><a href="{% url 'store' %}">Continue Your shopping</a></button>
  <!--- End Empty cart-->
  {% else %}
  <!--- Start full cart-->
  <section class="cart-contents">
    <!--- Start Contents header-->
    <div class="contents-header">
      <ul>
        <li>Price</li>
        <li>Quantity</li>
        <li>Subtotal</li>
      </ul>
    </div>
    <!--- End Contents header-->

    <!--- Start One Content-->
    {% for cart_item in cart_items %}
    <div class="all-cart-contents">
      <ul class="article-price-qty">
        <li class="article-name">{{cart_item.product.product_name}}</li>
        <li class="article-price">{{cart_item.product.price_with_tax}} Eu</li>
        <li class="article-qty">
          <ul>
          
            <li>
               <!-- Start  Decrement part -->
              <a
                href="{% url 'remove_cart' cart_item.product.id cart_item.id %}"
              >
                -
              </a>
               <!-- End  Decrement part -->
            </li>
         
            <li>
              <!-- Start  Quantity part -->
              {{cart_item.quantity}}</li>
              <!-- End  Quantity part -->
            <li>
       
                <!-- Start Cart item incrementation -->
              <form
                action="{% url 'add_cart' cart_item.product.id %}"
                method="POST"
              >
                {% csrf_token %} 
                {% for item in cart_item.variations.all %}
                <input
                  type="hidden"
                  name="{{ item.variation_category | lower}}"
                  value="{{ item.variation_category | capfirst }}"
                />
                {% endfor %}
                <button type="submit">+</button>
              </form>
                <!-- End Cart item incrementation -->
            </li>
          
          </ul>
        </li>
        <li class="article-subtotal">{{cart_item.sub_total}} Eu</li>
      </ul>
      <div class="content-img-container">
        <img src="{{cart_item.product.product_cover_image.url}}" alt="" />
      </div>

      {% comment %} start varirations {% endcomment %}
      <ul class="article-filter">
        {% if cart_item.variations.all %} 
            {% for item in cart_item.variations.all %}
        <li>
          {{ item.variation_category | capfirst }} : {{ item.variation_value | capfirst }}
        </li>
            {% endfor %} 
        {% endif %}
      </ul>
      {% comment %} end varirations {% endcomment %}
      <div class="trash">
        <a href="{% url 'remove_cart_item' cart_item.product.id cart_item.id %}"
          ><img src="{% static 'assets/imgs/trash.png' %}" alt=""
        /></a>
      </div>
    </div>
    {% endfor %}
    <!--- End One Content-->
    <div class="total-account">
      <ul>
        <li>Total</li>
        <li>{{grand_total}}Eu</li>
      </ul>
    </div>
  </section>
  <!--- End Contents -->
  <!--- Start Resume -->
  <section class="cart-resume">
    <ul>
      <li class="summary"><h1>Summary</h1></li>
      <li class="resume">
        <p class="first-content">Standard delivery</p>
        <p>00.0 Eu</p>
      </li>
      <li class="resume">
        <p class="first-content">Total order amount</p>
        <p>{{grand_total}} Eur</p>
      </li>
      <li class="proceed-payment"><p>Proceed to payment</p></li>
    </ul>
  </section>
  {% endif %}

  <!--- End Resume -->
  {% endblock content %}
</div>
